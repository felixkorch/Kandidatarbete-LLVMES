#macro PRINT 2
%1:
LDA %2, X
BEQ exit
STA $2008
INX
JMP %1
#endmacro

#macro SBC_CMP 3
LDA %1
SBC %2
CMP %3
#endmacro

.org $8000

ok_str:
.db "ok", 10, 0

err_str:
.db "err", 10, 0

; Flags: N V U B D I Z C

; Immediate test
main:


SBC_CMP #$0A #$05 #$04 ; should be $04 because c = 0
BNE print_err
;STA $200C



SBC_CMP #$04 #$04 #$00 ; should be $00 because c = 1 
BNE print_err
;STA $200C ; should be Flags: 0011



SBC_CMP #$A0 #$40 #$60
BNE print_err
;STA $200C
    



SBC_CMP #$04 #$08 #$FC
BNE print_err
;STA $200C



JMP print_ok


PRINT print_ok ok_str
PRINT print_err err_str

exit:
LDA #0
STA $200F ; exit 0

.org $FFFC
.dw main ; Reset routine